{"version":3,"file":"static/js/482.37f99410.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/modules/QueryMovies/SearchForm/SearchForm.module.scss?0ad7","modules/QueryMovies/SearchForm/SearchForm.jsx","webpack://react-homework-template/./src/modules/QueryMovies/LoadMore/LoadMore.module.scss?372f","modules/QueryMovies/LoadMore/LoadMore.jsx","modules/QueryMovies/QueryMovies.jsx","pages/SearchPage/SearchPage.jsx","shared/api/fetchMovies.js","webpack://react-homework-template/./src/shared/components/MoviesList/MoviesList.module.scss?ab08","shared/components/MoviesList/MoviesList.jsx","webpack://react-homework-template/./src/shared/components/Section/Section.module.scss?b1c8","shared/components/Section/Section.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"form\":\"SearchForm_form__v3KKw\",\"label\":\"SearchForm_label__wksvP\",\"text\":\"SearchForm_text__g+siJ\",\"input\":\"SearchForm_input__QFANz\",\"button\":\"SearchForm_button__aYgCJ\"};","import PropTypes from 'prop-types';\nimport { useState } from 'react';\n\nimport styles from 'modules/QueryMovies/SearchForm/SearchForm.module.scss';\n\nexport default function SearchForm({ onFormSubmit }) {\n  const [value, setValue] = useState('');\n\n  function onSubmit(e) {\n    e.preventDefault();\n\n    if (value.trim() !== '') {\n      onFormSubmit(value);\n      setValue('');\n    }\n  }\n\n  return (\n    <form className={styles.form} onSubmit={onSubmit}>\n      <label className={styles.label}>\n        <span className={styles.text}>Find movie: </span>\n        <input\n          className={styles.input}\n          onChange={e => {\n            setValue(e.target.value);\n          }}\n          value={value}\n          type=\"text\"\n        />\n      </label>\n      <button className={styles.button} type=\"submit\">\n        Search\n      </button>\n    </form>\n  );\n}\n\nSearchForm.propTypes = {\n  onFormSubmit: PropTypes.func.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"LoadMore_button__-jWki\"};","import PropTypes from 'prop-types';\n\nimport styles from 'modules/QueryMovies/LoadMore/LoadMore.module.scss';\n\nexport default function LoadMore({ onClick }) {\n  return (\n    <button type=\"button\" className={styles.button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nLoadMore.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { fetchQueryMovies } from 'shared/api/fetchMovies';\n\nimport SearchForm from 'modules/QueryMovies/SearchForm/SearchForm';\nimport MoviesList from 'shared/components/MoviesList/MoviesList';\nimport LoadMore from './LoadMore/LoadMore';\n\nexport default function QueryMovies() {\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(1);\n\n  const firstRender = useRef(true);\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const search = searchParams.get('query');\n\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n\n    async function getMovies() {\n      try {\n        const { data } = await fetchQueryMovies(search, page);\n\n        setMovies(ps => {\n          return [...ps, ...data.results];\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    getMovies();\n  }, [page, search]);\n\n  function queryMovies(query) {\n    if (query === search) {\n      return;\n    }\n    setSearchParams({ query });\n    setMovies([]);\n  }\n\n  function loadMore() {\n    setPage(ps => ps + 1);\n  }\n\n  return (\n    <>\n      <SearchForm onFormSubmit={queryMovies} />\n      <MoviesList items={movies} />\n      {movies.length > 0 && <LoadMore onClick={loadMore} />}\n    </>\n  );\n}\n","import Section from 'shared/components/Section/Section';\nimport QueryMovies from 'modules/QueryMovies/QueryMovies';\n\nexport default function SearchPage() {\n  return (\n    <Section>\n      <QueryMovies />\n    </Section>\n  );\n}\n","import axios from 'axios';\n\nconst moviesApi = axios.create({\n  baseURL: 'https://api.themoviedb.org/3',\n  params: {\n    api_key: '66226a1e6e6df674891504524d512221',\n  },\n});\n\nexport async function fetchMostPopularMovies() {\n  const response = await moviesApi.get('/trending/movie/day');\n  return response;\n}\n\nexport async function fetchQueryMovies(movieName, page) {\n  const response = await moviesApi.get('/search/movie', {\n    params: {\n      query: movieName,\n      page,\n    },\n  });\n\n  return response;\n}\n\nexport async function feetchMovieById(id) {\n  const response = await moviesApi.get(`/movie/${id}`);\n  return response;\n}\n\nexport async function fetchMovieCast(id) {\n  const response = await moviesApi.get(`/movie/${id}/credits`);\n  return response;\n}\n\nexport async function fetchMovieReviews(id) {\n  const response = await moviesApi.get(`/movie/${id}/reviews`);\n  return response;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"MoviesList_list__AFLvD\",\"link\":\"MoviesList_link__-AXHg\",\"item\":\"MoviesList_item__bd9A-\",\"image\":\"MoviesList_image__E8Cyn\",\"wrapper\":\"MoviesList_wrapper__urspN\",\"title\":\"MoviesList_title__Plizf\",\"infoWrapper\":\"MoviesList_infoWrapper__h80y4\",\"info\":\"MoviesList_info__PJGbd\"};","import PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport styles from 'shared/components/MoviesList/MoviesList.module.scss';\n\nexport default function MoviesList({ items = [] }) {\n  const location = useLocation();\n\n  const elements = items.map(\n    ({ id, original_title, poster_path, release_date, vote_average }) => {\n      const imagePath = poster_path\n        ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n        : 'https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-scaled-1150x647.png';\n      return (\n        <Link\n          to={`/movies/${id}`}\n          key={id}\n          state={{ from: location }}\n          className={styles.link}\n        >\n          <li className={styles.item}>\n            <img\n              src={imagePath}\n              alt={original_title}\n              className={styles.image}\n            />\n            <div className={styles.wrapper}>\n              <h3 className={styles.title}>{original_title}</h3>\n              <div className={styles.infoWrapper}>\n                <span className={styles.info}>{release_date}</span>\n                <span className={styles.info}>\n                  Vote: {vote_average.toFixed(1)}\n                </span>\n              </div>\n            </div>\n          </li>\n        </Link>\n      );\n    }\n  );\n\n  return <ul className={styles.list}>{elements}</ul>;\n}\n\nMoviesList.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      original_title: PropTypes.string,\n      release_date: PropTypes.string,\n      vote_average: PropTypes.number,\n    })\n  ).isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"Section_section__iNlTu\",\"title\":\"Section_title__bnPJ6\"};","import PropTypes from 'prop-types';\n\nimport styles from 'shared/components/Section/Section.module.scss';\n\nexport default function Section({ title, children }) {\n  return (\n    <section className={styles.section}>\n      {title && <h2 className={styles.title}>{title}</h2>}\n      {children}\n    </section>\n  );\n}\n\nSection.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node.isRequired,\n};\n"],"names":["SearchForm","onFormSubmit","useState","value","setValue","className","styles","onSubmit","e","preventDefault","trim","onChange","target","type","LoadMore","onClick","QueryMovies","movies","setMovies","page","setPage","firstRender","useRef","useSearchParams","searchParams","setSearchParams","search","get","useEffect","fetchQueryMovies","data","ps","results","console","log","current","getMovies","query","MoviesList","items","length","SearchPage","Section","moviesApi","axios","baseURL","params","api_key","fetchMostPopularMovies","response","movieName","feetchMovieById","id","fetchMovieCast","fetchMovieReviews","location","useLocation","elements","map","original_title","poster_path","release_date","vote_average","imagePath","to","state","from","src","alt","toFixed","title","children"],"sourceRoot":""}